<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Chord Detector</title>
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
  </head>
  <body>
    <h1>Chord Detector</h1>

    <a href="https://github.com/Ugotsta/chord_detector"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>

    <p>A demo of <a href="https://github.com/myers/chord_detector#readme"><code>code_detector</code></a>, a javascript chord detection library. </p>
    <p>More details about this fork: <a href="https://github.com/Ugotsta/chord_detector">https://github.com/Ugotsta/chord_detector</a></p>

    <div style="width: 100%">
      <div style="float: left; width: 50%">
        <div id="chroma-visualizer"></div>
        <h3 id="chord-detection"></h3>
      </div>

      <div style="float: left; width: 50%; position: relative">
        <div>
          <h3>Sample A</h3>
          <audio class="audio" controls="controls" src="A-Chord.ogg"></audio>
        </div>

        <div>
          <h3>Sample B</h3>
          <audio class="audio" controls="controls" src="E-Chord.ogg"></audio>
        </div>

      </div>
    </div>
    <script>
      function handle_file_upload(f) {
          // for now, we'll just play the first dropped file
          let url = URL.createObjectURL( f[0] );
          audio.src = url;
          audio.play();
      }
      // drag-and-drop file handler for local files
      var $c = $('.audio');
      $c.on( 'dragenter', function(e) {
          e.stopPropagation();
          e.preventDefault();
          $(this).css( 'filter', 'invert(100%)' );
      });
      $c.on( 'dragover', function(e) {
          e.stopPropagation();
          e.preventDefault();
      });
      $c.on( 'dragleave', function(e) {
          $(this).css( 'filter', 'none' );
      });
      $c.on( 'drop', function(e) {
          $(this).css( 'filter', 'none' );
          e.preventDefault();
          var f = e.originalEvent.dataTransfer.files;
          let url = URL.createObjectURL( f[0] );
          $(this).attr('src', url);
      });
    </script>
    <script src="bundle.js" async></script>
  </body>
</html>
